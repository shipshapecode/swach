<div class="bg-menu flex flex-wrap items-center p-2 rounded w-full">
  <div
    class="cursor-default flex flex-grow items-center justify-between p-1 text-main-text text-sm w-full"
    {{on "click" this.transitionToColorHistory}}
  >
    <div>
      Color History
    </div>

    {{#if this.last16Colors.length}}
      <ClickOutside
        @onClickOutside={{set this "colorHistoryMenuIsShown" false}}
      >
        <div class="flex flex-grow items-center">
          <button
            class="rounded px-1 {{if this.colorHistoryMenuIsShown "bg-main"}}"
            id="toggle-color-history-menu"
            type="button"
            {{on
              "click"
              (stop-propagation
                (set
                  this
                  "colorHistoryMenuIsShown"
                  (not this.colorHistoryMenuIsShown)
                )
              )
            }}
          >
            {{svg-jar "more-horizontal" class="icon" height="15" width="15"}}
          </button>

          <EmberPopover
            @arrowClass="hidden"
            @event="none"
            @isShown={{this.colorHistoryMenuIsShown}}
            @side="bottom-end"
            @spacing={{10}}
            @targetId="toggle-color-history-menu"
            @tooltipClass="bg-menu border-main text-menu-text"
          >
            <button
              class="flex items-center h-3 pb-4 pl-2 pr-2 pt-4 text-menu-text transition-colors hover:text-menu-text-hover"
              type="button"
              {{on "click" (stop-propagation this.clearColorHistory)}}
            >
              {{svg-jar
                "clear-history"
                class="menu-icon inline-block mr-2"
                height="20"
                width="20"
              }} Clear History
            </button>
          </EmberPopover>
        </div>
      </ClickOutside>
    {{/if}}
  </div>

  {{#if this.last16Colors.length}}
    <DragSortList
      data-test-color-history
      @additionalArgs={{hash isColorHistory=true}}
      @classNames="color-history-list flex flex-wrap w-full"
      @isHorizontal={{true}}
      @items={{this.last16Colors}}
      @sourceOnly={{true}}
      @dragEndAction={{fn this.moveColorsBetweenPalettes}} as |color|
    >
      <div
        class="inline-block m-1 h-8 relative rounded w-8"
        {{on "click" (fn this.colorUtils.copyColorToClipboard color)}}
      >
        <div
          data-test-color-history-square={{color.name}}
          class="absolute h-8 left-0 rounded top-0 w-8 z-10"
          style={{html-safe (concat "background-color: " color.hex)}}
        ></div>
        <div
          class="opacity-checkerboard absolute h-8 left-0 rounded top-0 w-8 z-0"
        ></div>
      </div>
    </DragSortList>
  {{else}}
    <span class="inline-block m-1 py-1 text-main-text text-sm w-full">
      Use the
      <span class="font-bold">
        eyedropper
      </span>
      {{svg-jar "drop" class="menu-icon inline" height="12" width="12"}} or
      <span class="font-bold">
        color selector
      </span>
      {{svg-jar "edit-color" class="menu-icon inline" height="12" width="12"}}
      to start building your palette.
    </span>
  {{/if}}
</div>

<div class="flex items-center justify-between mt-4 p-1 py-4 w-full">
  <h2 class="pl-1 text-lg text-heading">
    Palettes
  </h2>

  <div>
    <button
      type="button"
      {{on "click" (set this "showFavorites" (not this.showFavorites))}}
    >
      {{svg-jar
        (if this.showFavorites "filled-heart" "outline-heart")
        class=(concat "icon " (if this.showFavorites "filled"))
        height="15"
        width="15"
      }}
    </button>

    <button
      data-test-create-palette
      class="ml-1 mt-1 text-sm hover:text-alt-hover"
      type="button"
      {{on "click" this.createNewPalette}}
    >
      {{svg-jar "plus-circle" class="icon" height="15" width="15"}}
    </button>
  </div>
</div>

<PalettesList
  @moveColorsBetweenPalettes={{this.moveColorsBetweenPalettes}}
  @palettes={{this.palettes}}
  @showFavorites={{this.showFavorites}}
/>